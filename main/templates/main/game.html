{% load static %}
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì£¼ë£¨ë§ˆë¸” ê²Œì„</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/game.css' %}" />
    <link
      href="https://fonts.googleapis.com/css2?family=Gugi&display=swap"
      rel="stylesheet"
    />
  </head>

  <body class="theme-{{ theme }}">
    <!-- ì™¼ìª½: ê²Œì„íŒ -->
    <div class="board">
      <div class="turn-info">
        <div class="turn-header">
          <p>
            í˜„ì¬ í„´ :
            <span id="turn-number" class="turn-number">{{ current_round }}</span
            >ë°”í€´
          </p>

          <button class="end-button">
            ê²Œì„ ì¢…ë£Œ
            <img
              src="{% static 'assets/icons/tdesign_close-octagon-filled.svg' %}"
              alt="ì¢…ë£Œ ì•„ì´ì½˜"
              class="end-icon"
            />
          </button>
        </div>
        <p
          id="player-data"
          class="players"
          data-prev="{{ prev_player.nickname|escapejs }}"
          data-current="{{ current_player.nickname|escapejs }}"
          data-next="{{ next_player.nickname|escapejs }}"
        >
          <span id="prev-player" style="color: #ccc">
            {{ prev_player.nickname }}
          </span>
          <span
            id="current-player"
            style="color: #000; font-weight: bold; margin: 0 20px"
          >
            {{ current_player.nickname }}
          </span>
          <span id="next-player" style="color: #ccc">
            {{ next_player.nickname }}
          </span>
        </p>
      </div>
      <!-- ê²Œì„ íƒ€ì¼ ê·¸ë¦¬ë“œ -->
      <div class="tiles-grid" style="position: relative">
        <!-- ğŸ’¡ ë§ˆë¸”ë¼ë¦¬ ë¡œê³  ë°°ê²½ ì¶”ê°€ -->
        <img
          src="{% static 'assets/icons/marblekiri.svg' %}"
          alt="ë§ˆë¸”ë¼ë¦¬ ë¡œê³ "
          class="board-logo"
        />

        <!-- ğŸ¯ ê¸°ì¡´ íƒ€ì¼ êµ¬ì¡° ìœ ì§€ -->
        <div class="tile" data-index="10">11</div>
        <div class="tile" data-index="9">10</div>
        <div class="tile" data-index="8">9</div>
        <div class="tile" data-index="7">8</div>
        <div class="tile" data-index="6">7</div>
        <div class="tile" data-index="5">6</div>
        <div class="tile" data-index="4">5</div>

        <div class="tile" data-index="11">12</div>
        <div class="tile" data-index="3">4</div>

        <div class="tile" data-index="12">13</div>
        <div class="mission-box"></div>
        <div class="tile" data-index="2">3</div>

        <div class="tile" data-index="13">14</div>
        <div class="tile" data-index="1">2</div>

        <div class="tile" data-index="14">15</div>
        <div class="tile" data-index="15">16</div>
        <div class="tile" data-index="16">17</div>
        <div class="tile" data-index="17">18</div>
        <div class="tile" data-index="18">19</div>
        <div class="tile" data-index="19">20</div>
        <div class="tile" data-index="0">1</div>

        <img
          src="{% static 'assets/images/horse.svg' %}"
          alt="ë§"
          class="horse"
          id="horse-icon"
        />
      </div>

      <div class="action-buttons">
        <input
          type="hidden"
          name="csrfmiddlewaretoken"
          value="{{ csrf_token }}"
        />
        <button class="pass-btn" data-action="pass" disabled>í†µê³¼</button>
        <button class="drink-btn" data-action="drink" disabled>ë§ˆì…”!</button>
      </div>
    </div>

    <!-- ì˜¤ë¥¸ìª½: ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
      <!--ì„¸ì¸ ìˆ˜ì •, setupì˜ ë­í‚¹ ì²´í¬ ì—¬ë¶€ ê°€ì ¸ì˜¤ê¸°-->
      <input
        type="hidden"
        id="show-ranking-hidden"
        value="{{ show_ranking|yesno:'true,false' }}"
      />
      {% if show_ranking %}
      <div class="ranking">
        <h3 class="ranking-title">ë§ì´ ë§ˆì‹  ì‚¬ëŒ</h3>
        <ul class="ranking-list" id="ranking-list"></ul>
      </div>
      {% endif %}

      <!--ì„¸ì¸ ìˆ˜ì •, ë„ì°©í•œ ì¹¸ì˜ ë¯¸ì…˜ ëª©ë¡ì„ ëˆ„ì í•´ì„œ ë„ìš°ê¸°-->
      <!-- ë¯¼ì§€ ìˆ˜ì •, css ìˆ˜ì • ìœ„í•œ êµ¬ì¡° ìˆ˜ì • -->
      <div class="missions">
        <h3>ë¯¸ì…˜ ëª©ë¡</h3>
        <ol class="mission-list">
          <li class="mission-spacer"></li>
          <!-- ìœ„ìª½ ì—¬ë°±ìš© -->

          {% for i in "01234567890123456789" %}
          <li class="mission-item" data-index="{{ forloop.counter0 }}">
            <span class="mission-number">{{ forloop.counter }}.</span>
            <span class="mission-text"> </span>
          </li>
          {% endfor %}

          <li class="mission-spacer"></li>
          <!-- ì•„ë˜ìª½ ì—¬ë°±ìš© -->
        </ol>
      </div>

      <div class="dice">
        <div class="dice-roll-container">
          <div class="dice-number-box">
            <div class="dice-circle">
              <span class="dice-number">1</span>
            </div>
          </div>
          <button class="roll-dice-button">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
        </div>
      </div>
    </div>

    <!-- ê²Œì„ ì¢…ë£Œ ëª¨ë‹¬ -->
    <div id="endGameModal" class="modal hidden">
      <div class="modal-box">
        <h2 class="modal-title">ê²Œì„ì„ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h2>
        <p class="modal-warning">
          <img
            src="{% static 'assets/icons/material-symbols_warning.svg' %}"
            alt="ê²½ê³ "
            class="warning-icon"
          />
          ì§„í–‰ì¤‘ì¸ ë‚´ìš©ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </p>
        <div class="modal-buttons">
          <button class="continue-button">ì´ì–´ì„œ ì§„í–‰</button>
          <!-- <button class="end-button-modal">ê²Œì„ ì¢…ë£Œ</button> -->
          <button
            class="end-button-modal"
            id="endGameConfirmButton"
            data-url="{% url 'end_game' %}"
          >
            ê²Œì„ ì¢…ë£Œ
          </button>
        </div>
      </div>
    </div>

    <script src="{% static 'js/game.js' %}"></script>
  </body>
</html>
